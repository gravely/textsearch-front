(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-820d84ae"],{1098:function(e,t,a){"use strict";var n=a("8bc8"),i=a.n(n);i.a},"24b3":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"multiple-conditional-query"},e._l(e.conditions,function(t,n){return a("div",{key:n,staticClass:"condition"},[a("Checkbox",{staticClass:"condition-check",model:{value:t.isChecked,callback:function(a){e.$set(t,"isChecked",a)},expression:"item.isChecked"}},[e._v(e._s(t.label))]),a("Input",{staticClass:"value",attrs:{placeholder:"请输入"+t.label},model:{value:t.searchValue,callback:function(a){e.$set(t,"searchValue",a)},expression:"item.searchValue"}})],1)}),0)},i=[],o={name:"multiple-condition-query",props:{conditions:Array},data:function(){return{conditionSelect:"",conditionsValue:"",tags:[]}},methods:{}},s=o,r=(a("7239"),a("2877")),l=Object(r["a"])(s,n,i,!1,null,null,null);t["a"]=l.exports},"3f5e":function(e,t,a){"use strict";a.d(t,"f",function(){return i}),a.d(t,"g",function(){return o}),a.d(t,"a",function(){return s}),a.d(t,"c",function(){return r}),a.d(t,"h",function(){return l}),a.d(t,"d",function(){return c}),a.d(t,"b",function(){return u}),a.d(t,"e",function(){return d});var n=a("66df"),i=function(e){return n["a"].request({url:"text/document",method:"get",params:e})},o=function(e){return n["a"].request({url:"text/document/detail/".concat(e),method:"get"})},s=function(e){return n["a"].request({url:"text/document/".concat(e),method:"delete"})},r=function(e,t){return n["a"].request({url:"text/document/".concat(e),method:"put",data:t})},l=function(e,t){return n["a"].request({url:"text/document/upload",method:"post",data:e,headers:t})},c=function(e){return n["a"].request({url:"text/document/extract/".concat(e),method:"post"})},u=function(e){return n["a"].request({url:"text/document/download/".concat(e),method:"get",responseType:"blob"})},d=function(e){return n["a"].request({url:"/text/page",method:"get",params:e})}},7239:function(e,t,a){"use strict";var n=a("d20c"),i=a.n(n);i.a},"8bc8":function(e,t,a){},"92bf":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",{staticClass:"standard-comparison document-retrieval"},[a("div",{staticClass:"operate-area border"},[a("div",{staticClass:"input-conditions"},[a("div",{staticClass:"simple"},[a("Input",{staticClass:"operate-area-item input",attrs:{placeholder:"关键字"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("Icon",{attrs:{slot:"prefix",type:"ios-search"},on:{click:e.getList},slot:"prefix"})],1),a("Select",{staticClass:"operate-area-item select",attrs:{clearable:"",placeholder:"请选择要素库"},on:{"on-change":e.getList},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("Option",{attrs:{value:"0"}},[e._v("船舰关键技术标准要素库")]),a("Option",{attrs:{value:"1"}},[e._v("重点型号标准要素库")]),a("Option",{attrs:{value:"2"}},[e._v("船舰标准化动态要素库")]),a("Option",{attrs:{value:"3"}},[e._v("军民标准通用化要素库")])],1)],1),e.showMultiple?a("div",{staticClass:"multiple"},[a("p",{staticClass:"show-multiple-info",on:{click:function(t){return e.changeShowMultiple(!1)}}},[a("Icon",{attrs:{type:"ios-arrow-dropup-circle"}}),a("span",[e._v("收起")])],1),a("multiple-condition-query",{ref:"multipleQuery",attrs:{conditions:e.conditions}})],1):a("div",{staticClass:"show-multiple-info",on:{click:function(t){return e.changeShowMultiple(!0)}}},[a("Icon",{attrs:{type:"ios-arrow-dropdown-circle"}}),a("span",[e._v("显示更多查询条件")])],1)]),a("div",{staticClass:"btns"},[a("Button",{staticClass:"operate-area-item",attrs:{type:"info"},on:{click:e.search}},[e._v("查询")]),a("Button",{staticClass:"operate-area-item",on:{click:e.resetSearch}},[e._v("重置查询条件")]),a("Button",{staticClass:"operate-area-btn",attrs:{type:"info"},on:{click:e.showUpload}},[e._v("上传文件")])],1)]),a("Table",{attrs:{loading:e.isLoadig,columns:e.column,data:e.data}}),e.total>0?a("Page",{staticClass:"page",attrs:{total:e.total,"page-size":e.pageSize,"show-elevator":"","show-total":"",current:e.currentPage},on:{"on-change":e.changePage}}):e._e(),a("upload-file",{attrs:{visible:e.uploadVisible},on:{cancel:e.cancelUpload}})],1)},i=[],o=(a("7f7f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{staticClass:"upload-file",attrs:{value:e.visible,title:"上传文件","mask-closable":!1},on:{"on-cancel":e.handleCancel}},[a("Form",{ref:"fileForm",attrs:{model:e.fileForm,"label-width":85,rules:e.formRules}},[a("FormItem",{attrs:{label:"文件类型：",prop:"type"}},[a("Select",{attrs:{placeholder:"请选择文件类型"},model:{value:e.fileForm.type,callback:function(t){e.$set(e.fileForm,"type",t)},expression:"fileForm.type"}},[a("Option",{attrs:{value:"0"}},[e._v("船舰关键技术标准要素库")]),a("Option",{attrs:{value:"1"}},[e._v("重点型号标准要素库")]),a("Option",{attrs:{value:"2"}},[e._v("船舰标准化动态要素库")]),a("Option",{attrs:{value:"3"}},[e._v("军民标准通用化要素库")]),a("Option",{attrs:{value:"4"}},[e._v("其它")])],1)],1),a("FormItem",{attrs:{label:"所选文件："}},[a("div",{staticClass:"file-operate"},[""===e.fileName?a("span",{staticClass:"file-name no-file"},[e._v("暂时还没有选择文件")]):a("span",{staticClass:"file-name"},[e._v(e._s(e.fileName))]),a("form",{attrs:{method:"post",action:"http://47.97.170.236/text/document/upload",enctype:"multipart/form-data"}},[a("Button",{staticClass:"upload"},[a("input",{attrs:{type:"file",name:"file",id:"file"},on:{change:function(t){return e.preview()}}}),a("span",[e._v("请选择文件")])])],1)])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"info",loading:e.loadingStatus},on:{click:e.handleOk}},[e._v(e._s(e.loadingStatus?"上传中...":"确认上传"))]),a("Button",{on:{click:e.handleCancel}},[e._v("取消")])],1)],1)}),s=[],r=(a("28a5"),a("3f5e")),l={name:"upload-file",props:{visible:Boolean},data:function(){return{fileName:"",loadingStatus:!1,fileForm:{type:"",fileContent:""},formRules:{type:[{required:!0,message:"请选择文件类型",trigger:"change"}]}}},methods:{preview:function(){var e=document.getElementById("file").files[0];this.fileName=e.name},handleOk:function(){var e=this;this.$refs["fileForm"].validate(function(t){if(t)if(e.fileName){var a=e.fileName.split(".");if("pdf"!==a[a.length-1])return void e.$Message.error("暂不支持除PDF以外的文件");e.loadingStatus=!0;var n=new FormData;n.append("file",document.getElementById("file").files[0]),n.append("type",e.fileForm.type),n.append("submit",!1);var i={"Content-Type":"multipart/form-data"};Object(r["h"])(n,i).then(function(t){t.data.success&&(e.$Message.success("上传成功"),e.handleCancel())}).catch(function(t){var a=t.response.data;e.$Message.error(a&&a.errorMsg||"上传失败")}).then(function(){e.loadingStatus=!1})}else e.$Message.error("请选择文件")})},handleCancel:function(){this.$emit("cancel")}}},c=l,u=(a("1098"),a("2877")),d=Object(u["a"])(c,o,s,!1,null,"2acdc9c8",null),p=d.exports,h=a("90de"),f=a("24b3"),m={name:"standard-comparison",components:{MultipleConditionQuery:f["a"],UploadFile:p},data:function(){var e=this,t=[{value:"docCode",label:"编号",isChecked:!1,searchValue:""},{value:"name",label:"名称",isChecked:!1,searchValue:""},{value:"docRange",label:"适用范围",isChecked:!1,searchValue:""},{value:"organization",label:"制修订单位",isChecked:!1,searchValue:""},{value:"timeAge",label:"时间及标龄",isChecked:!1,searchValue:""},{value:"reference",label:"应用参考标准",isChecked:!1,searchValue:""}];return{conditions:t,keyword:"",uploadVisible:!1,showMultiple:!1,type:"",searchCondition:"",searchValue:"",pageSize:10,currentPage:1,total:0,isLoadig:!1,changeTypeFormate:["船舰关键技术标准要素库","重点型号标准要素库","船舰标准化动态要素库","军民标准通用化要素库","其它"],column:[{title:"编号",key:"docCode"},{title:"名称",key:"name",render:function(t,a){return t("div",{class:"highlight-div"},Object(h["d"])(t,a.row.name,e.keyword))}},{title:"类型",key:"type",render:function(t,a){return t("span",e.changeTypeFormate[a.row.type])}},{title:"适用范围",key:"docRange"},{title:"制修订单位",key:"organization"},{title:"时间及标龄",key:"timeAge"},{title:"应用参考标准",key:"reference",render:function(t,a){return t("div",{class:"highlight-div"},Object(h["d"])(t,a.row.reference,e.keyword))}},{title:"动态更新情况",key:"dynamicUpdate",render:function(t,a){return t("div",{class:"highlight-div"},Object(h["d"])(t,a.row.dynamicUpdate,e.keyword))}},{title:"相关技术背景",key:"bgTech",render:function(t,a){return t("div",{class:"highlight-div"},Object(h["d"])(t,a.row.bgTech,e.keyword))}},{title:"发展趋势",key:"bgTrend",render:function(t,a){return t("div",{class:"highlight-div"},Object(h["d"])(t,a.row.bgTrend,e.keyword))}},{title:"操作",key:"operation",minWidth:100,render:function(t,a){return t("div",{attrs:{class:"operate-ceil"}},[t("Poptip",{props:{title:"您确定提取数据吗？",transfer:!0,confirm:!0},on:{"on-ok":function(){e.extract(a.row.uuid)}}},[t("Button",{props:{size:"small",type:"info"}},"提取数据")]),t("Button",{props:{size:"small",type:"info"},style:{marginRight:"10px",marginLeft:"10px"},on:{click:function(){e.$router.push({name:"standard_file",query:{documentId:a.row.uuid}})}}},"详情"),t("Poptip",{props:{title:"您确定删除吗？",transfer:!0,confirm:!0},on:{"on-ok":function(){e.delete(a.row.uuid)}}},[t("Button",{props:{size:"small",type:"warning"}},"删除")])])}}],data:[]}},mounted:function(){},methods:{changeShowMultiple:function(e){this.showMultiple=e,this.resetMultipleQuery()},changePage:function(e){this.currentPage=e,this.getList()},search:function(){this.currentPage=1,this.getList()},getMultipleConditions:function(e){for(var t=0;t<this.conditions.length;t++)if(this.conditions[t].isChecked){if(""===this.conditions[t].searchValue)return void this.$Message.error("请输入"+this.conditions[t].label);e[this.conditions[t].value]=this.conditions[t].searchValue}return e},getList:function(){var e=this,t={currentPage:this.currentPage,pageSize:this.pageSize};this.keyword&&(t["keyword"]=this.keyword),this.type&&(t["type"]=this.type),this.showMultiple&&(t=this.getMultipleConditions(t)),this.isLoadig=!0,Object(r["f"])(t).then(function(t){t.data.result&&(e.data=t.data.result.rows,e.total=t.data.result.total)}).catch(function(e){console.error(e)}).then(function(){e.isLoadig=!1})},extract:function(e){var t=this;Object(r["d"])(e).then(function(e){e.data.success?(t.$Message.success("正确"),t.getList()):t.$Message.error("错误")}).catch(function(e){var a=e.response.data;t.$Message.error(a&a.errorMsg||"错误")})},delete:function(e){var t=this;Object(r["a"])(e).then(function(e){e.data.success&&(t.$Message.success("删除成功"),t.getList())}).catch(function(e){var a=e.response.data;t.$Message.error(a&a.errorMsg||"删除失败")})},showUpload:function(){this.uploadVisible=!0},cancelUpload:function(){this.uploadVisible=!1},resetMultipleQuery:function(){this.conditions=this.conditions.map(function(e){var t={value:e.value,label:e.label,isChecked:!1,searchValue:""};return t})},resetSearch:function(){this.keyword="",this.searchValue="",this.searchCondition="",this.type="",this.showMultiple=!1,this.resetMultipleQuery()}}},v=m,g=(a("94c1"),Object(u["a"])(v,n,i,!1,null,"3eff20da",null)),y=g.exports;t["default"]=y},"94c1":function(e,t,a){"use strict";var n=a("9530"),i=a.n(n);i.a},9530:function(e,t,a){},d20c:function(e,t,a){}}]);