(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bd27e448"],{"1b1a":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",{staticClass:"standard-file document-retrieval"},[n("div",{staticClass:"operate-area border"},[n("router-link",{attrs:{to:"standard_comparison"}},[n("Button",[t._v("返回列表")])],1)],1),n("div",{staticClass:"summary border"},[n("p",{staticClass:"summary-title"},[t._v(t._s(t.fileInfo.fileName))]),n("p",{staticClass:"summary-time"},[t._v(t._s(t.fileInfo.publishTime))]),n("p",{staticClass:"summary-tag"},[t.isEdit?n("Select",{staticStyle:{width:"40%"},attrs:{placeholder:"请选择要素库"},model:{value:t.editTypeValue,callback:function(e){t.editTypeValue=e},expression:"editTypeValue"}},[n("Option",{attrs:{value:"0"}},[t._v("船舰关键技术标准要素库")]),n("Option",{attrs:{value:"1"}},[t._v("重点型号标准要素库")]),n("Option",{attrs:{value:"2"}},[t._v("船舰标准化动态要素库")]),n("Option",{attrs:{value:"3"}},[t._v("军民标准通用化要素库")])],1):n("Tag",[t._v(t._s((t.fileInfo.type||0===t.fileInfo.type)&&t.changeTypeFormate[t.fileInfo.type]))]),t.isEdit?n("span",{staticClass:"operate-span",on:{click:t.saveTag}},[t._v("保存")]):t._e(),t.isEdit?n("span",{staticClass:"operate-span",on:{click:t.cancelEdit}},[t._v("取消")]):n("span",{staticClass:"operate-span",on:{click:t.editTag}},[t._v("编辑")])],1)]),n("div",{staticClass:"original-standard-document border"},[n("p",{staticClass:"title"},[t._v("原标准文件")]),n("a",{attrs:{href:t.$pathPrefix.downUrl+this.fileInfo.uuid,target:"_blank"}},[t._v("下载")]),n("a",{on:{click:t.previewPdf}},[t._v("原始内容")])]),n("div",{staticClass:"main-content border"},[n("edit-content",{attrs:{title:"适用范围","edit-info":t.fileInfo.docRange,"title-key":"docRange"},on:{save:t.save}})],1),n("div",{staticClass:"main-content border"},[n("edit-content",{attrs:{title:"制修订单位","edit-info":t.fileInfo.organization,"title-key":"organization"},on:{save:t.save}})],1),n("div",{staticClass:"main-content border"},[n("edit-content",{attrs:{title:"时间及标龄","edit-info":t.fileInfo.timeAge,"title-key":"timeAge"},on:{save:t.save}})],1),n("div",{staticClass:"main-content border"},[n("edit-content",{attrs:{title:"动态更新情况","edit-info":t.fileInfo.dynamicUpdate,"title-key":"dynamicUpdate"},on:{save:t.save}})],1),n("div",{staticClass:"main-content border"},[n("edit-content",{attrs:{title:"应用参考标准","edit-info":t.fileInfo.reference,"title-key":"reference"},on:{save:t.save}})],1),n("div",{staticClass:"main-content border"},[n("edit-content",{attrs:{title:"相关技术背景","edit-info":t.fileInfo.bgTech,"title-key":"bgTech"},on:{save:t.save}})],1),n("div",{staticClass:"main-content border"},[n("edit-content",{attrs:{title:"发展趋势","edit-info":t.fileInfo.bgTrend,"title-key":"bgTrend"},on:{save:t.save}})],1),n("add-tag",{attrs:{visible:t.addTagVisible},on:{cancel:t.cancelAddTag}})],1)},i=[],s=(n("6b54"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{staticClass:"add-tag",attrs:{value:t.visible,title:"添加要素","mask-closable":!1},on:{"on-cancel":t.handleCancel}},[n("Form",{ref:"tagForm",attrs:{model:t.tagForm,"label-width":75,rules:t.formRules}},[n("FormItem",{attrs:{label:"要素名称："}},[n("Input",{attrs:{placeholder:"请输入要素名称"},model:{value:t.tagForm.name,callback:function(e){t.$set(t.tagForm,"name",e)},expression:"tagForm.name"}})],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"info",loading:t.loadingStatus},on:{click:t.handleOk}},[t._v("保存")]),n("Button",{on:{click:t.handleCancel}},[t._v("取消")])],1)],1)}),o=[],c={name:"add-tag",props:{visible:Boolean},data:function(){return{loadingStatus:!1,tagForm:{name:""},formRules:{}}},methods:{handleOk:function(){this.loadingStatus=!0},handleCancel:function(){this.$emit("cancel")}}},r=c,l=(n("edf3"),n("2877")),d=Object(l["a"])(r,s,o,!1,null,"7747850e",null),u=d.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-content standard-file"},[n("p",{staticClass:"main-content-label"},[n("span",{staticClass:"title"},[t._v(t._s(t.title))]),t.isEdit?n("span",{staticClass:"operate-span",on:{click:t.save}},[t._v("保存")]):t._e(),t.isEdit?n("span",{staticClass:"operate-span",on:{click:t.cancel}},[t._v("取消")]):n("span",{staticClass:"operate-span",on:{click:t.edit}},[t._v("编辑")])]),n("p",{staticClass:"main-content-detail content"},[t.isEdit?n("Input",{attrs:{type:"textarea"},model:{value:t.info,callback:function(e){t.info=e},expression:"info"}}):n("span",[t._v(t._s(t.editInfo||"无"))])],1)])},p=[],m={name:"edit-content",props:{title:String,editInfo:String,titleKey:String},data:function(){return{info:"",isEdit:!1}},methods:{edit:function(){this.isEdit=!0,this.info=this.editInfo},save:function(){this.isEdit=!1,this.$emit("save",this.info,this.titleKey)},cancel:function(){this.isEdit=!1,this.info=this.editInfo}}},v=m,h=(n("8d9d"),Object(l["a"])(v,f,p,!1,null,"7815b93a",null)),g=h.exports,b=n("3f5e"),y={name:"standard-file",components:{AddTag:u,EditContent:g},data:function(){return{addTagVisible:!1,isEdit:!1,editTypeValue:"",documentId:this.$route.query.documentId,changeTypeFormate:["船舰关键技术标准要素库","重点型号标准要素库","船舰标准化动态要素库","军民标准通用化要素库","其它"],fileInfo:{}}},mounted:function(){this.documentId&&this.getDetail()},methods:{previewPdf:function(){var t=this.$pathPrefix.viewUrl,e=this.$router.resolve({path:"/information_analysis/pdf",query:{link:t+this.fileInfo.uuid,page:1,name:this.fileInfo.fileName}}),n=e.href;window.open(n,"_blank")},getDetail:function(){var t=this;Object(b["g"])(this.documentId).then(function(e){e.data.result&&(t.fileInfo=e.data.result)})},downloadFile:function(){var t=this;Object(b["b"])(this.documentId).then(function(e){if(e.data){var n=e.data,a=new Blob([n],{type:"application/pdf"}),i=URL.createObjectURL(a),s=document.createElement("a");s.href=i,s.setAttribute("download",t.fileInfo.fileName),document.body.appendChild(s),s.click()}else t.$Message.warning("文件损坏或者不存在!")})},addTag:function(){this.addTagVisible=!0},cancelAddTag:function(){this.addTagVisible=!1},editTag:function(){this.isEdit=!0,this.editTypeValue=this.fileInfo.type.toString()},cancelEdit:function(){this.isEdit=!1},saveTag:function(){this.save(this.editTypeValue,"type"),this.cancelEdit()},save:function(t,e){var n=this,a=JSON.parse(JSON.stringify(this.fileInfo));a[e]=t,Object(b["c"])(this.documentId,a).then(function(t){t.data.success&&(n.$Message.success("修改成功"),n.getDetail())}).catch(function(t){var e=t.response.data;n.$Message.error(e&&e.errorMsg||"修改失败")}).then(function(){n.loadingStatus=!1})}}},_=y,I=(n("849f"),Object(l["a"])(_,a,i,!1,null,"ccb5d034",null)),C=I.exports;e["default"]=C},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"3f5e":function(t,e,n){"use strict";n.d(e,"f",function(){return i}),n.d(e,"g",function(){return s}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return c}),n.d(e,"h",function(){return r}),n.d(e,"d",function(){return l}),n.d(e,"b",function(){return d}),n.d(e,"e",function(){return u});var a=n("66df"),i=function(t){return a["a"].request({url:"text/document",method:"get",params:t})},s=function(t){return a["a"].request({url:"text/document/detail/".concat(t),method:"get"})},o=function(t){return a["a"].request({url:"text/document/".concat(t),method:"delete"})},c=function(t,e){return a["a"].request({url:"text/document/".concat(t),method:"put",data:e})},r=function(t,e){return a["a"].request({url:"text/document/upload",method:"post",data:t,headers:e})},l=function(t){return a["a"].request({url:"text/document/extract/".concat(t),method:"post"})},d=function(t){return a["a"].request({url:"text/document/download/".concat(t),method:"get",responseType:"blob"})},u=function(t){return a["a"].request({url:"/text/page",method:"get",params:t})}},"6b54":function(t,e,n){"use strict";n("3846");var a=n("cb7c"),i=n("0bfb"),s=n("9e1e"),o="toString",c=/./[o],r=function(t){n("2aba")(RegExp.prototype,o,t,!0)};n("79e5")(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?r(function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?i.call(t):void 0)}):c.name!=o&&r(function(){return c.call(this)})},"849f":function(t,e,n){"use strict";var a=n("e332"),i=n.n(a);i.a},"8d9d":function(t,e,n){"use strict";var a=n("c22e"),i=n.n(a);i.a},c22e:function(t,e,n){},e332:function(t,e,n){},eb2b:function(t,e,n){},edf3:function(t,e,n){"use strict";var a=n("eb2b"),i=n.n(a);i.a}}]);